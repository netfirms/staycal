{% extends 'base.html' %}
{% block content %}
<h1 class="text-2xl font-semibold mb-4">Cloudinary Settings</h1>
<div class="bg-white p-4 rounded-xl shadow-sm border max-w-2xl">
  <p class="text-sm text-gray-600 mb-4">Provide your Cloudinary connection URL. Format: <code>cloudinary://&lt;api_key&gt;:&lt;api_secret&gt;@&lt;cloud_name&gt;</code></p>

  {% if message %}
    <div class="mb-3 p-3 rounded bg-green-50 text-green-800 text-sm">{{ message }}</div>
  {% endif %}
  {% if error %}
    <div class="mb-3 p-3 rounded bg-red-50 text-red-800 text-sm">{{ error }}</div>
  {% endif %}

  <form method="post" action="/admin/cloudinary" class="space-y-3">
    <div>
      <label class="block text-sm font-medium">CLOUDINARY_URL</label>
      <input name="cloudinary_url" class="border rounded w-full p-2 focus:outline-none focus:ring-2 focus:ring-blue-500" value="{{ current_url }}" placeholder="cloudinary://..." />
      <p class="text-xs text-gray-500 mt-1">Leave blank to disable Cloudinary (uploads will fall back to local storage).</p>
    </div>
    <div class="flex items-center gap-2">
      <a href="/admin" class="px-3 py-2 border rounded">Back</a>
      <button class="bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700">Save</button>
      {% if configured %}
        <span class="ml-auto text-xs px-2 py-1 rounded bg-green-100 text-green-800">Configured</span>
      {% else %}
        <span class="ml-auto text-xs px-2 py-1 rounded bg-yellow-100 text-yellow-800">Not Configured</span>
      {% endif %}
    </div>
  </form>

  <div class="mt-6 text-sm text-gray-600">
    <h2 class="font-medium mb-1">Notes</h2>
    <ul class="list-disc pl-5 space-y-1">
      <li>When enabled, images uploaded for bookings, rooms, and properties will go to Cloudinary.</li>
      <li>If Cloudinary is disabled or misconfigured, uploads will be stored locally under <code>/static/uploads</code>.</li>
    </ul>
  </div>
</div>
{% endblock %}
